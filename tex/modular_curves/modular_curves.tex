\documentclass[a4paper,12pt,reqno]{amsart}
\usepackage[utf8]{inputenc}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{makecell}
\usepackage{multirow}
\usepackage{hhline}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{mathtools}
\usepackage{todonotes}
\usepackage{comment}
\usepackage{mathrsfs}
\usepackage{enumitem}
\usepackage[all,cmtip]{xy}
\usepackage[hyphens]{url}
\usepackage{hyperref}
\usepackage{tikz}
\usetikzlibrary{cd}
\usepackage{enumitem}

\setlength\marginparwidth{2cm}

\usepackage[british]{babel}
\usepackage[margin=1.2in]{geometry}
\setlength{\belowcaptionskip}{-0.3em}

\usepackage{eqparbox}
\newcommand{\eqmathbox}[2][M]{\eqmakebox[#1]{$\displaystyle#2$}}
\usepackage{pbox}
\usepackage{cleveref}


%make todonotes work with amsart
\makeatletter
\providecommand\@dotsep{5}
\renewcommand{\listoftodos}[1][\@todonotes@todolistname]{%
	\@starttoc{tdo}{#1}}
\makeatother

\newcommand{\RR}{\mathcal{L}} %Riemann-Roch space
%\renewcommand{\S}{S}
\newcommand{\matrixtwo}[4]{\left[ \begin{array}{rr} #1 & #2 \\ #3 & #4 \end{array} \right]}
\renewcommand{\O}{\mathcal{O}} % the symbol used with sheaves
\newcommand{\completion}[1]{\widehat{#1}}
\newcommand{\nequiv}{\not\equiv}
\newcommand{\set}[1]{\left\lbrace #1 \right\rbrace}
\newcommand{\multiset}[1]{\llbrace #1 \rrbrace}
\newcommand{\llbrace}{\lbrace \!\!\!\: \lbrace}
\newcommand{\rrbrace}{\rbrace \!\!\!\: \rbrace}
\newcommand{\diamondop}[1]{\langle #1 \rangle}
\newcommand{\field}[1]{\mathbb{#1}}  % the font for a mathematical field is blackboard
\newcommand{\Q}{\field{Q}} % the field of the rationals
\newcommand{\R}{\field{R}} % the field of the reals
\newcommand{\N}{\field{N}} % the semi-ring of the natural numbers
\newcommand{\C}{\field{C}} % the field of complex number
\newcommand{\Z}{\field{Z}} % the ring of integers
\newcommand{\F}{\field{F}} % finite fields
\newcommand{\T}{\field{T}} % hecke algebra
\newcommand{\A}{\field{A}}
\renewcommand{\SS}{\field{S}}
\newcommand{\I}{\field{I}}
\newcommand{\G}{\field{G}}
\newcommand{\HH}{\field{H}}
\newcommand{\Qbar}{\overline{\Q}}
\newcommand{\Fbar}{\overline{\F}}
\renewcommand{\P}{\field{P}}
\newcommand{\PP}{\field{P}}
\newcommand{\mc}[1]{\mathcal{#1}}
\newcommand{\K}{\mathcal{K}}
\renewcommand{\L}{\mathcal{L}}
%\newcommand{\X}{\mathcal{X}}
%\newcommand{\Y}{\mathcal{Y}}
\newcommand{\FF}{\mathcal{F}}
\renewcommand{\H}{\field{H}} % complex upper half plane
\newcommand{\neron}[1]{\tilde{#1}}
\newcommand{\Oold}{\O}
\newcommand{\todoi}{\todo[inline]}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\Mod}[1]{\ (\mathrm{mod}\ #1)}
\newcommand{\Nm}{\textup{Nm}}
\newcommand{\Tr}{\textup{Tr}}
\newcommand{\fp}{\mathfrak{p}}
\newcommand{\fm}{\mathfrak{m}}
\newcommand{\fP}{\mathfrak{P}}
\newcommand{\fq}{\mathfrak{q}}
\newcommand{\fQ}{\mathfrak{Q}}
\newcommand{\legendre}[2]{\left(\frac{#1}{#2}\right)}
\newcommand{\lcm}{\textup{lcm}}
\newcommand{\E}{\mathcal{E}} % the symbol for neron model of elliptic curve E

\newcommand{\HomGrpVar}{\mathrm{Hom}_{\bf grp\text{-}var}}
\newcommand{\IsoKVec}[1]{\mathrm{Iso}_{#1 {\bf\text{-}vec}}}
\newcommand{\transpose}{t}


\newcommand{\stab}[2]{\text{stab}_{#1}(#2)}
\newcommand{\barinder}[1]{{\color{orange} ($\clubsuit$ Barinder: #1)}}
\newcommand{\maarten}[1]{{\color{blue} ($\spadesuit$ Maarten: #1)}}

%mathoperators

\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\Sets}{Sets}
\DeclareMathOperator{\Contr}{Contr}
\DeclareMathOperator{\Char}{char}
\DeclareMathOperator{\ann}{Ann}
\DeclareMathOperator{\trace}{Tr}
\DeclareMathOperator{\mdeg}{mdeg}
\DeclareMathOperator{\cuspsum}{cuspsum}
\DeclareMathOperator{\Div}{div}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\id}{Id}
\DeclareMathOperator{\Isom}{Isom}
\DeclareMathOperator{\Orbit}{Orbit}
\DeclareMathOperator{\map}{Map}
\DeclareMathOperator{\primes}{Primes}
\DeclareMathOperator{\Frob}{Frob}
\DeclareMathOperator{\frob}{Frob}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\PSL}{PSL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\Cl}{Cl}
\DeclareMathOperator{\CaCl}{CaCl}
\DeclareMathOperator{\Frac}{Frac}
\DeclareMathOperator{\Pic}{Pic}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\proj}{Proj}
\DeclareMathOperator{\supp}{Supp}
\DeclareMathOperator{\gon}{gon}
\DeclareMathOperator{\aut}{Aut}
\DeclareMathOperator{\Prin}{prin}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\num}{Num}
\DeclareMathOperator{\Cot}{Cot}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Supp}{\textup{\textsf{Supp}}}
\DeclareMathOperator{\HCF}{\textup{\textsf{HCF}}}
\DeclareMathOperator{\IsogPrimeDeg}{\textup{\textsf{IsogPrimeDeg}}}
\DeclareMathOperator{\BadFormalImmersion}{\textup{\textsf{BadFormalImmersion}}}
\DeclareMathOperator{\AGFI}{\textup{\textsf{AGFI}}}

\newcommand{\Cusp}{\Div^{c}}
\newcommand{\Cuspo}{\Div^{0,c}}
\newcommand{\Divo}{\Div^{0}}
\newcommand{\PrinCusp}{\Prin^{c}}
\newcommand{\eps}{\varepsilon} % lazy is good
\newcommand{\PreTypeOneTwoPrimes}{\textup{\textsf{PreTypeOneTwoPrimes}}}
\newcommand{\TypeTwoPrimes}{\textup{\textsf{TypeTwoPrimes}}}
\newcommand{\TypeOnePrimes}{\textup{\textsf{TypeOnePrimes}}}
\newcommand{\GenericBound}{\textup{\textsf{GenericBound}}}
\newcommand{\MMIB}{\textup{\textsf{MMIB}}}

\newtheorem{lemma}{Lemma}
\newtheorem{theorem}[lemma]{Theorem}
\newtheorem{proposition}[lemma]{Proposition}
\newlist{propenum}{enumerate}{1} % also creates a counter called 'propenumi'
\setlist[propenum]{label=\roman*), ref=\theproposition(\roman*)}
\crefalias{propenumi}{proposition} 
\newtheorem{corollary}[lemma]{Corollary}
\newtheorem*{claim}{Claim}


\theoremstyle{definition}
\newtheorem{definition}[lemma]{Definition}
\newlist{defenum}{enumerate}{1} % also creates a counter called 'defenumi'
\setlist[defenum]{label=\roman*), ref=\thedefinition(\roman*)}
\crefalias{defenumi}{definition} 

\newtheorem{example}[lemma]{Example}
\newtheorem{exercise}[lemma]{Exercise}
\newtheorem{notation}[lemma]{Notation}
\newtheorem{question}[lemma]{Question}
\newtheorem{remark}[lemma]{Remark}
\newtheorem*{condCC}{Condition CC}
\newtheorem*{ack}{Acknowledgements}
\newtheorem{case}{Case}

\numberwithin{lemma}{section}
\numberwithin{equation}{section} 
\numberwithin{figure}{section}
\title{Modular Curves}
\author{Maarten Derickx}
%\date{August 2023}


\begin{document}



\begin{abstract}
These are lecture notes for a course on modular curves given in Zagreb. The language of schemes is avoided in order to keep the notes accessible to an audience that is familiar with varieties but not with schemes.
\end{abstract}

\maketitle
\setcounter{tocdepth}{3}
\tableofcontents

\section{Background}

\subsection{Notations}

\begin{itemize}
	\item If $K$ is a field and $V_1,V_2$ are vector spaces over $K$ then $\IsoKVec{K}(V_1,V_2)$ denotes the set of isomorphisms between $V_1$ and $V_2$ as $K$ vector spaces.
	\item If $R$ is a ring and $n >0 $ an integer then $M_n(R)$ denotes the set of $n$ by $n$ matrices.
	\item If $A \in M_n(R)$ is a matrix then $A^\transpose$ denotes its transpose. 
\end{itemize}

\newpage
\subsection{Varieties}



\hspace{1em}\todo[inline]{say something about varieties over non algebraically closed fields as in section 1 of Silverman}

\subsubsection{Families of varieties.}
\begin{definition}[Family of varieties.]\label{def:family-of-varieties}
Let $S$ by a variety over a field $K$. A \textit{family of varieties over $S$} is a pair $(X,f)$ where 
\begin{defenum}
	\item $X$ is a variety over $K$,
	\item $f: X \to S$ is a regular map,
	\item for every $s \in S(\overline K)$ the fiber $f^{-1}(s) \subseteq X$ is a variety over $K$. \label{def:family-of-varieties-fibers}
\end{defenum}
\end{definition}

\begin{notation}\label{def:fiber-notation}
Let $(X,f)$ be a family of varieties over $S$ and $s \in S(\overline K)$, then $X_s :=f^{-1}(s)$ is used as shorthand notation for the fiber above $s$.
\end{notation}
Note that $f^{-1}(s)$ is always an algebraic subset of $X(\overline K)$. So \Cref{def:family-of-varieties-fibers} is equivalent to the fiber $f^{-1}(s)$ being irreducible.

\begin{definition}[Morphism of families]\label{def:family-of-varieties-morphism}
Let $S$ by a variety over a field $K$ and $(X_1,f_1), (X_2,f_2)$ be two families of varieties over $S$. A morphism of families from $(X_1,f_1)$ to $(X_2,f_2)$ is a regular map $h: X_1 \to X_2$ defined over $K$ such that $f_1 = f_2 \circ h$.
\begin{center}
    \begin{tikzcd}
	X_1 \arrow[rr,"h"] \arrow[dr, "f_1"']  & & X_2 \arrow[dl, "f_2"] \\
	& S &
\end{tikzcd}
\end{center}
\end{definition}

Let $s \in  S(\overline K)$ and let $h_s : X_{1,s} \to X_{2,s}$  denote the restriction of $h$ to the fibers above $s$. It follows from \Cref{def:family-of-varieties-morphism} that $h_s$ is a regular map between varieties over $\overline K$. Note that if $s$ lies in some field $L \subset \overline K$ and $K \subset L$ then $h_s$ is actually defined over $L.$

\begin{notation}
	Let $(T,f_1), (X,f_2)$ be two families of varieties over $S$, then $X(T)$ is shorthand notation for the set of morphisms as in \Cref{def:family-of-varieties-morphism}. Similarly $X(S)$ is shorthand notation where $(T,f_1) = (S, \id_S)$. 
\end{notation}
The notation $X(S)$ also agrees by definition with the set of sections of $f_2 : X \to S$ since the commutative diagram in \Cref{def:family-of-varieties-morphism} reduces to the relation $\id_S = f_2 \circ h$ when $(T,f_1) = (S, \id_S)$.

\subsection{Fiber products}

\begin{definition}
Let $f: X \to Z$ and $g : Y \to Z$ be regular maps between varieties over a field $K$. The \textit{fiber product of $X$ and $Y$ over $Z$}, if it exists, is a variety $X \times_Z Y$ together with commutative diagram of the form 
\[
\begin{tikzcd}
	X \times_Z Y \arrow[r,"i"] \arrow[d,"h"] & Y \arrow[d, "g"] \\
	X \arrow[r, "f"'] & Z
\end{tikzcd}
\]
 that satisfied the following universal property. If $T$ is another variety sitting in a commutative diagram
\[
\begin{tikzcd}
	T \arrow[r,"u"] \arrow[d,"v"] & Y \arrow[d, "g"] \\
	X \arrow[r, "f"'] & Z,
\end{tikzcd}
\]
then there is a unique $\phi : T \to X\times_Z Y$ making the following diagram commute:
\[
\begin{tikzcd}
T \arrow[ddr, bend right, "u"'] \arrow[drr, bend left, "v"] \arrow[dr, dashed, "\exists !\phi"] & & \\
& X \times_Z Y \arrow[r,"i"] \arrow[d,"h"] & Y \arrow[d, "g"] \\
& X \arrow[r, "f"'] & Z.
\end{tikzcd}
\]
\end{definition}\label{def:fiber_product_abstract}
If a fiber product $X\times_Z Y$ exists as in the definition, then it is unique up to a unique isomorphim as is always the case with objects defined using universal properties.

\begin{remark}Instead of using the language of universal properties, one could also define the fiber product in terms of a varieties representing a functor. I.e.  $X \times_Z Y$, if it exists, is the variety representing the contravariant functor
	\begin{align*}
	    F_{f,g} : \Var_K^{op} &\to \Sets \\
	         T &\mapsto \set{u,v \in \Hom_{\Var}(T,X) \times \Hom_{\Var}(T,Y)  \mid f\circ u = g \circ v}
	\end{align*}
\end{remark}

\begin{remark}\label{rem:fiber-product-map-to-base}
If the fiber product $X \times_Z Y$ exists then $f \circ h = g \circ i$. So the fiber product  $X \times_Z Y$ comes equiped with a canonical map $f \circ h = g \circ i$  to $Z$.
\end{remark}


\begin{definition}\label{def:fiber_product_concrete}
Let $f: X \to Z$ and $g : Y \to Z$ be regular maps between varieties over a field $K$. Define $X\times'_Z Y \subset X \times Y$ to be the closed subset
\begin{align*}
X\times'_Z Y :=\set{x,y \subset X \times Y \mid f(x)=g(y)}.
\end{align*}
\end{definition}

While $X\times'_Z Y$ will always be a union of closed sub-varieties of $X \times Y$ over $\overline K$, it will not always be a variety. This is because varieties are geometrically irreducible by definition.

\begin{exercise}
Let $K$ be a field of characteristic $>2$.	Let $X = Y = Z = \A^1_K$ and let $f: X \to Z$ and $g := Y\to Z$ both be the map $\A^1_K \to   \A^1_K$ given by $x \to x^2$. Show that $X\times'_Z Y$ is not irreducible.
\end{exercise}

\begin{exercise}
	Let $K$ be a field of characteristic $>2$ and $t \in K^*$ not a square.	Let $X = Y = Z = \A^1_K$ and let $f: X \to Z$ be given by $x \to x^2$ and $g := Y\to Z$ be given $x \to tx^2$. Show that $X\times'_Z Y$ is irreducible but not geometrically irreducible.
\end{exercise}

\begin{lemma}
If $X\times'_Z Y$ from \cref{def:fiber_product_concrete} is geometrically irreducible then $X\times'_Z Y$ and furthermore $X\times'_Z Y$ together with the two projection maps to $X$ and $Y$ satisfies the universal property of the fiber product.
\end{lemma}
\begin{proof}
	\todo[inline]{add proof}
\end{proof}

\begin{exercise}
	Let $S$ be a variety over a field $K$ and $(X_1,f_1), (X_2,f_2)$ be two families of varieties over $S$ such that the fiber product $X_1 \times_S X_2$ exists. Show that 
	\begin{enumerate}
		\item $X_1 \times_S X_2 \to S$ is a family of varieties over $S$, where $X_1 \times_S X_2 \to S$ is the map from \Cref{rem:fiber-product-map-to-base},
		\item for all $s \in S(\overline K)$ one has $(X_1 \times_S X_2)_s$ is isomorphic to $X_{1,s} \times X_{2,s}$, i.e. the fiber above $s$ of the fiber product is just the product of the the fibers.

	\end{enumerate}
\end{exercise}

\subsection{Group varieties}
\begin{definition}\label{def:group-variety}
Let $K$ be a field, a \textit{group variety} over $K$ is a variety $G$ over $K$ together with 
\begin{itemize}
	\item a point $e \in G(K)$ called the identity element,
	\item a morphism $\iota: G \to G$ defined over $K$ called the inverse map,
	\item a morphism $s: G \times G \to G$ defined over $K$, called the addition map
\end{itemize}
such that the usual group axioms hold for $e, \iota, s$ for all elements in $G(\overline K)$. To be precise for all $a,b,c \in G(\overline K)$ one has
\begin{itemize}
	\item $s(a,e)=a = s(e,a)$ ($e$ is an identity element),
	\item $s(s(a,b),c)) = s(a,s(b,c))$ ($s$ is associative),
	\item $s(\iota(a),a) = e = s(a, \iota(a))$ ($\iota$ is an inverse).
\end{itemize}
If furthermore $s$ is symmetric, i.e. $s(a,b)=s(b,a)$, then $G$ is called an \textit{abelian} group variety.
\end{definition}

\begin{lemma}\label{stmt:group-structure-on-group-variety}
	Let $G$ be a group variety over a field $K$ and $L\subset \overline K$ be a subfield containing $K$. Then $G(L)$ with the operations$e,\iota, s$ is a group.
\end{lemma}
\begin{proof}
	This follows immediately from the definition.
\end{proof}

\begin{example}
Let $K$ be a field and $n$ an integer. Then $\A^n$ can be given the structure of a group variety over $K$ by defining $e:=(0,0,\ldots,0) \in \A^n(K)$, 
\begin{align}
s \colon  \A^n \times \A^n \to& \A^n \\
((a_1,a_2,\ldots, a_n),(b_1,b_2,\ldots, b_n)) \mapsto& (a_1+b_1,a_2+b_2,\ldots, a_n+a_n) \text{ and} \\
\iota \colon  \A^n  \to& \A^n \\
(a_1,a_2,\ldots, a_n), \mapsto& (-a_1,-a_2,\ldots, -a_n).
\end{align}
Notice that the usual bijection $\A^n(K) \cong K^n$ is actually a group isomorphism where the left hand side has the group law coming from the group variety structure and the right hand right hand side has is just coordinate wise addition in $K$.
\end{example}

\begin{definition}\label{def:group-variety-homomorphism}
Let $(G_1,e_1,\iota_1,s_1), (G_2,e_2,\iota_2,s_2)$ be group varieties over  a field $K$. Then a \textit{group variety homomorphism over $K$} is morphism $\phi: G_1 \to G_2$ of varieties defined over $K$ such that
\begin{itemize}
	\item $\phi(e_1)=e_2$
	\item for all $a,b \in G_1(\overline K)$ the relation $\phi(s_1(a,b)) = s_2(\phi(a),\phi(b))$ holds.
\end{itemize}
The set of all group variety homomorphisms over $K$ is denoted by $\HomGrpVar(G_1,G_2)$.
\end{definition}
Notice the absence of a compatibility condition for the inverse map, the reason for this omission is that inverse of an element is unique. And hence the compatibility $\phi(\iota(a))=\iota(\phi(a))$ follows from the group variety and group variety homomorphism axioms.

\begin{lemma}\label{stmt:group-homomorphism-from-group-variety-homomorphism}
	Let $\phi: G_1 \to G_2$ be a group variety homomorphism over a field $K$ and $L\subset \overline K$ be a subfield containing $K$. Then $\phi$ induces a group homomorphism  $G_1(L) \to G_2(L)$.
\end{lemma}
\begin{proof}
	This follows immediately from the definition.
\end{proof}

\begin{exercise}
Let $K$ be a field of characteristic $0$. Show that $\HomGrpVar(\A^1_K, \A^1_K)$ consists of the linear polynomials $ax \in K[x]$ (hint: $\Hom(\A^1_K, \A^1_K) \cong K[x]$). 
\end{exercise}



\subsection{Some group theory}

\begin{definition}Let $G$ be a group and let $s: G \times G \to G$ be associated group law on $G$. Then $G^{op}$ is defined to be the group whose underlying set and identity element are the same as that of $G$ but whose group law is given by \begin{align*}
	m^{op}: G \times G \to& G \\
	  g,h \mapsto& m(h,g)
	\end{align*}
\end{definition}

\begin{definition}\label{def:group_action}
	Let $G$ be a group with identity element $e$ and $S$ be a set. Then a \textit{left group action} of $G$ on $S$ is a map $\rho: G \times S \to S$  such that for all $g,h \in G$ and $s \in S$:
	\begin{itemize}
		\item $\rho(e, s) = s$
		\item $\rho(g,\rho(h,s))=\rho(gh,s)$
	\end{itemize}
Similarly a \textit{right group action} of $G$ on $S$ is a map $\rho: S \times G \to S$  such that for all $g,h \in G$ and $s \in S$:
\begin{itemize}
	\item $\rho(s,e) = s$
	\item $\rho(\rho(s,h),g)=\rho(s,hg)$
\end{itemize}
\end{definition}

\begin{lemma}\label{stmt:left-group-action-is-group-hom}
Let $G$ be a group and $S$ be a set and let $\rho : G \times S \to S$ be an arbitrary map. Then the following are equivalent:
\begin{itemize}
	\item $\rho$ is a left action of $G$ on $S$
	\item The image of the map\begin{align*}
	f_\rho : G \to& \Hom(S,S)\\
	g \mapsto& (s\mapsto \rho(g,s))
	\end{align*} is contained in $\Aut(S) \subset \Hom(S,S)$ and the induced map $f_\rho : G \to \Aut(S)$ is a group homomorphism.
\end{itemize}
\end{lemma}
\begin{proof}
Note that if $\rho$ is a group action then $f_\rho(g^{-1})$ is the inverse of $f_\rho(g)$, which shows that $f_\rho(g) \in \Aut(S)$. The rest of the proof is a relatively straightforward rewriting of the definitions of group action and group homomorphisms.	%todo spell out
\end{proof}


The above lemma looks slightly different for right group actions.
\begin{lemma}\label{stmt:right-group-action-is-oppositie-group-hom}
	Let $G$ be a group and $S$ be a set and let $\rho : S \times G \to S$ be an arbitrary map. Then the following are equivalent:
	\begin{itemize}
		\item $\rho$ is a right action of $G$ on $S$
		\item The image of the map\begin{align*}
		f_\rho : G^{op} \to& \Hom(S,S)\\
		g \mapsto& (s\mapsto \rho(s,g))
		\end{align*} is contained in $\Aut(S) \subset \Hom(S,S)$ and the induced map $f_\rho : G^{op} \to \Aut(S)$ is a group homomorphism.
	\end{itemize}
\end{lemma}
\begin{proof}
	Similar to that of \cref{stmt:left-group-action-is-group-hom}.
\end{proof}

\begin{definition}\label{def:stabilizer}
Let $\rho:  G \times S \to S$ be a left action of the group $G$ on the set $S$ and let $s \in S$. Then the stabalizer of $s$ in  $G$ is defined as \begin{align*}
\stab{G}{s} := \set{ g \in G \mid \rho(g,s)=s}
\end{align*}
\end{definition}
\begin{lemma}
Let $\rho: G \times S \to S$ be a left action of the group $G$ on the set $S$ and let $s \in S$, then $\stab{G}{s}$ is a subgroup of $G$.
\end{lemma}
\begin{proof}
If $\rho(g,s)=s$ and $\rho(h,s)=s$ then $\rho(gh,s)=\rho(g,\rho(h,s))=s$.
\end{proof}

\begin{lemma}
	Let $G$ be a group, and let $S_1$ and $S_2$ be sets with a left $G$ action. Let $C \subset S_2$ be a set of representatives of $G\backslash S_2$.
	Then the map \begin{align*}
	\phi : \coprod_{s_2 \in C} \stab{G}{s_2}\backslash S_1 \to& G \backslash(S_1 \times S_2)\\
	 \stab{G}{s_2}s_1\mapsto& G(s_1,s_2)
	\end{align*}
	is well defined and bijective.
\end{lemma}
\begin{proof}
For well it being well defined we need to show that it doesn't depend on the representative $s_1$ that was chosen for the orbit $\stab{G}{s_2}s_1$. Now suppose $gs_1 \in \stab{G}{s_2}s_1$ with $g \in \stab{G}{s_2}$ is another element in the same orbit then \begin{align*}\phi(\stab{G}{s_2}gs_1) = G(gs_1,s_2)=Gg(s_1,g^{-1}s_2)=G(s_1,s_2)=\phi(\stab{G}{s_2}s_1). \end{align*}

To show it is surjective, let $G(s_1,s_2) \in G\backslash(S_1 \times S_2)$ be an arbitrary. Since $C$ is a set of representatives of $G\backslash S_2$ we can find a $s_2' \in C$ and $g \in G$ such that $s_2=gs_2'$. Now surjetivity follows since $$G(s_1,s_2)=G(s_1,gs_2')=Gg(g^{-1}s_1,s_2') =  \phi(\stab{G}{s_2'}g^{-1}s_1).$$

For injectivity let $s_1, s_1' \in S$ and $s_2, s_2' \in C$. If  $\stab{G}{s_2}s_1$ and $\stab{G}{s'_2}s'_1$ map to the same element in $G\backslash(S_1 \times S_2)$ then $s_2$ and $s'_2$ must by in the same $G$ orbit. However since $C$ consists of representatives of $G \backslash S_2$ this forces $s_2 = s_2'$. Since we have $s_2=s_2'$ the equality $G(s_1,s_2) = G(s_1',s_2')$ is equivalent to $s'_1=gs_1$ for some $g \in \stab{G}{s_2}$ showing that $\stab{G}{s_2}s_1=\stab{G}{s'_2}s'_1$.
\end{proof}

\subsection{Adeles}

\section{Elliptic curves}

\subsection{Elliptic curves of arbitrary fields}
The following is the abstract definition of elliptic curve
\begin{definition}\label{def:ec-over-K}
Let $K$ be a field. An \textit{elliptic curve} over $K$ is a pair $(E,0)$ where $E$ is a smooth proper and geometrically irreducible curve of genus $1$ defined over $K$ and $0 \in E(K)$ is a point. A \textit{morphism} of elliptic curves $\phi:  (E_1,0) \to (E_2,0)$ is a morphism of varieties $\phi: E_1 \to E_2$ such that $\phi(0)=0$.
\end{definition}

Note that often when talking about elliptic curves, the element $0 \in E(K)$ is understood to be implicitly part of the data. And one writes $E$ instead of $(E,0)$.

\subsubsection{Weierstrass models}\label{sec:weierstrass-over-K}
The above definition is quite abstract. However, sometimes it is easier to work with explicit equations for elliptic curves. The goal of this subsection is to show that every elliptic curve over a field can be given by a Weierstrass model.

\begin{definition}[Weierstrass model]\label{def:weierstrass-model-over-K}
Let $a := (a_1,a_2,a_3,a_4,a_6) \in K^5$ then define $E_{A} \subset \P^2$ to be the curve given by
$$y^2z+ a_1xyz+a_3yz^2=x^3+a_2x^2z+a_4xz^2+a_6z^3.$$
The point $0$ on $E$ is defined the point where $(x:y:z) = (0:1:0)$.
\end{definition}



Note there is no $a_5$ in the above definition. This is on purpose and will become clear later.
Before we continue we need to define a quantity called the discriminant.
\begin{definition}[Discriminant]
The $b$-invariants $b_2,b_4,b_6,b_8 \in \Z[a_1,a_2,a_3,a_4,a_6]$ and the \text{discriminant} $\Delta \in \Z[a_1,a_2,a_3,a_4,a_6]$ are defined as follows:
\begin{align*}
b_2 &= a_1^2 + 4 a_2 \\
b_4 &= 2a_4 + a_1 a_3 \\
b_6 &= a_3^2 + 4 a_6 \\
b_8 &= a_1^2 a_6 + 4a_2 a_6 - a_1 a_3 a_4 + a_2 a_3^2 - a_4^2 \\
\Delta &= -b_2^2 b_8 - 8b_4^3 - 27b_6^2 + 9b_2 b_4 b_6.
\end{align*}
If $R$ is a ring and $a := (a'_1,a'_2,a'_3,a'_4,a'_6) \in R^5$ then $\Delta_a$ will be shorthand notation for $\Delta(a'_1,a'_2,a'_3,a'_4,a'_6)$.
\end{definition}
The first hint of why the $5$-th coefficient is labeled $a_6$ and not $a_5$ is already visible in this definition. Namely if we see $\Z[a_1,a_2,a_3,a_4,a_6]$ as a weighted polynomial ring where $a_i$ has weight $i$, then the $b_i$ are homogeneous of weight $i$ and $\Delta$ is homogeneous of weight $12$.

\begin{proposition}[A smooth Weierstrass model is an elliptic curve]\label{stmt:smooth-weierstrass-over-k-is-ec}
Let $K$ be a field and $a :=  (a_1,a_2,a_3,a_4,a_6) \in K^5$ then the following are equivalent:
\begin{itemize}[label=-]
	\item The pair $(E_{a},0)$ is an elliptic curve.
	\item The curve $E_{a}$ is smooth.
    \item $\Delta_a \neq 0$.
\end{itemize}
\end{proposition}
\begin{proof}
\todo[inline]{add reference to silverman}
\end{proof}



\begin{theorem}[Existence of Weierstrass model]\label{stmt:ec-over-k-has-weierstrass-model}
Let $(E,0)$ be an elliptic curve over $K$ then there is an $a := (a_1,a_2,a_3,a_4,a_6) \in K^5$ such that
$$\Delta_{a} \neq 0 \text{ and } (E,0) \cong (E_{a},0).$$
\end{theorem}
\begin{proof}
\todo[inline]{add reference  to silverman}
\end{proof}

\begin{proposition}[Isomorphisms between Weierstrass models]\label{stmt:iso-between-weierstrass-over-K-is-urst}
	Let $K$ be a field,  $a := (a_1,a_2,a_3,a_4,a_6)$  and $a' := (a'_1,a'_2,a'_3,a'_4,a'_6) $ elements of $K^5$ such that $\Delta_a \neq 0$ and $\Delta_{a'} \neq 0$ . If $f : E_a \to E_{a'}$ is an isomorphism of elliptic curves. Then there are $u \in K^*$ and $r,s,t \in K$ such that $f=f_{u,r,s,t}$ where $f_{u,r,s,t}$ is given by
\begin{align}
&f_{u,r,s,t} : &E_a &\to E_{a'} \label{eq:weierstrass-isomorphism} \\
& &(x:y:z) & \mapsto (u^2x+rz:u^3y+u^2sx+tz:z) \nonumber
\end{align}
\end{proposition}
\begin{proof}
	\todo[inline]{add reference  to silverman  and say that we use an inverse convention}
\end{proof}

\begin{comment}
The sage code that verifies these computations.
# R1.<a1,a2,a3,a4,a6> = QQ[]
# R2.<u,r,s,t> = R1[]
R1.<u,r,s,t> = QQ[]
R2.<a6,a4,a3,a2,a1> = R1[]
R3.<x,y,z> = R2[]
f = y^2*z+ a1*x*y*z+a3*y*z^2-(x^3+a2*x^2*z+a4*x*z^2+a6*z^3)
x1 = u^2*x+r*z
y1 = u^3*y+u^2*s*x+t*z
z1 = z
f1 = f(x=x1,y=y1,z=z1)/u^6
x2 = (x-r*z)/u^2
y2 = (y-s*(x-r*z)-t*z)/u^3
z2 = z
f2 = f(x=x2,y=y2,z=z2)*u^6
ff2 = R3(f2.numerator())
assert f2 == ff2
aa1 = ff2.coefficient(x*y*z)
aa2 = -ff2.coefficient(x^2*z)
aa3 = ff2.coefficient(y*z^2)
aa4 = -ff2.coefficient(x*z^2)
aa6 = -ff2.coefficient(z^3)
assert aa1 == R3(a1*u - 2*s)
assert aa2 == R3(a2*u^2 + a1*u*s - s^2 -3*r)
aa3_red =  R3(a3*u^3 + (-2)*t)
assert aa3 == aa3_red - aa1*r
aa4_red = R3(a4*u^4 + a3*u^3*s + (-3)*r^2 + a1*u*t + (-2)*s*t)
assert aa4 == aa4_red-2*aa2*r
aa6_red =R3(a6*u^6 + a3*u^3*t - r^3 - t^2)
assert aa6 == aa6_red-aa4*r-aa2*r^2
sage: latex(aa1)
u a_{1} - 2 s
sage: latex(aa2)
u^{2} a_{2} + \left(u s\right) a_{1} - s^{2} - 3 r
sage: latex(aa3)
u^{3} a_{3} + \left(-u r\right) a_{1} + 2 r s - 2 t
sage: latex(aa3_red)
u^{3} a_{3} - 2 t
sage: latex(aa4_red)
u^{4} a_{4} + \left(u^{3} s\right) a_{3} + \left(u t\right) a_{1} - 3 r^{2} - 2 s t
sage: latex(aa6_red)
u^{6} a_{6} + \left(u^{3} t\right) a_{3} - r^{3} - t^{2}
\end{comment}

Note that there is also the following converse to the above proposition.
\begin{proposition}[Change of Weierstrass model]\label{stmt:urst-is-iso-between-weierstrass-over-K-is}
Let $K$ be a field,  $a := (a_1,a_2,a_3,a_4,a_6) \in K^5$, $u \in K^*$ and $r,s,t \in K$. Define 
% sage: f2
% -x^3 + ((-a2)*u^2 + (-a1)*u*s + s^2 + 3*r)*x^2*z + (a1*u + (-2)*s)*x*y*z + y^2*z + ((-a4)*u^4 + (-a3)*u^3*s + 2*a2*u^2*r + 2*a1*u*r*s + (-2)*r*s^2 + (-3)*r^2 + (-a1)*u*t + 2*s*t)*x*z^2 + (a3*u^3 + (-a1)*u*r + 2*r*s + (-2)*t)*y*z^2 + ((-a6)*u^6 + a4*u^4*r + a3*u^3*r*s + (-a2)*u^2*r^2 + (-a1)*u*r^2*s + r^2*s^2 + (-a3)*u^3*t + r^3 + a1*u*r*t + (-2)*r*s*t + t^2)*z^3
\begin{comment}
the raw unsimplyfied stuff
\begin{align*} 
a'_1 & := a_1u -2s \\
a'_2 & := a_2u^2 + a_1us - s^2 -3r\\ 
a'_3 & := a_3u^3 - a_1ur + 2rs -2t \\
a'_4 & := a_4u^4 + a_3u^3s -2a_2u^2r -2a_1urs + 2rs^2 + 3r^2 + a_1ut + -2st \\
a'_6 & := a_{6} u^{6} - a_{4} u^{4} r - a_{3} u^{3} r s + a_{2} u^{2} r^{2} + a_{1} u r^{2} s - r^{2} s^{2} + a_{3} u^{3} t - r^{3} -a_{1} u r t + 2 r s t - t^{2}
\end{align*} 
\end{comment}
\begin{align}
\begin{split}
a'_1 &:= u a_{1} - 2 s \\
a'_2 &:= u^{2} a_{2} + u s a_{1} - s^{2} - 3 r \\
a'_3 &:= u^{3} a_{3} - a'_1 r - 2 t \\
a'_4 &:= u^{4} a_{4} - 2 a'_2 r + u^{3} s a_{3} + u t a_{1} - 3 r^{2} - 2 s t \\
a'_6 &:= u^{6} a_{6} - a'_4 r - a'_2 r^2 + \left(u^{3} t\right) a_{3} - r^{3} - t^{2}\\
a' &:= (a'_1,a'_2,a'_3,a'_4,a'_6).
\end{split}
\end{align}
Then $f_{u,r,s,t}$ from \cref{eq:weierstrass-isomorphism} defines an isomorphism between $E_a$ and $E_{a'}$. 

\end{proposition}
\begin{proof}
	\todo[inline]{add reference  to silverman  and say that we use an inverse convention}
\end{proof}
\subsubsection{Group law}

\subsubsection{Level structure}

\begin{definition}[Level structures]
	Let $E$ be an elliptic curve over a field $K$ and let $N$ be an integer. 
	\begin{defenum}
		\item Assume $N$ is invertible in $K$ then a \textit{full level $N$ structure on $E$} is a group isomorphism $\phi: (\Z/N\Z)^2 \to  E[N](K),$ \label{def:full-level-structure-over-K}
		\item Assume $N$ is invertible in $K$  a \textit{a point of order $N$ on $E$} is an injective group homomorphism $\phi: \Z/N\Z \to  E[N](K),$ \label{def:point-of-order-N-over-K}
		\item  a \textit{a point of order $\geq N$ on $E$} is an group homomorphism $\phi: \Z \to  E[N](K)$ whose image has cardinality $\geq N$. \label{def:point-of-order-geq-N-over-K}
	\end{defenum}
\end{definition}
\begin{remark}
Since $E[N](\overline K) \cong  (\Z/N\Z)^2$, \Cref{def:full-level-structure-over-K} is equivalent to giving $P,Q \in E[N](K)$ such that they together generate $E[N](\overline K)$. \Cref{def:point-of-order-N-over-K} is equivalent to giving a point $P \in E[N](K)$ of order $N$, and \cref{def:point-of-order-geq-N-over-K} is equivalent to giving a $P \in E[N](K)$ of order $\geq N$.
\end{remark}

\begin{definition}[Morphism with level structure]
Let $N$ be an integer that is invertible in $K$ and let $(E_1,\phi_1)$, $(E_2,\phi_2)$ two elliptic curves with full level $N$ structure over $K$. Then \textit{a morphism of elliptic curves with full level $N$ structure}  $f: (E_1,\phi_1) \to (E_2,\phi_2)$ is morphism $f: E_1 \to E_2$ of elliptic curves such that $f \circ \phi_1 = \phi_2$.
\end{definition}



\subsection{Families of elliptic curves}

\begin{definition}[Family of elliptic curves]\label{def:ec-over-var}
Let $S$ be a variety over a field $K$. An \textit{elliptic curve over $S$} or \textit{a family of elliptic curves over $S$} is a triple $(E,f,0)$ where
\begin{defenum}
	\item $E$ is a variety over $K$,
	\item $f : E \to S$ is a smooth and proper map,
	\item $0$ is a section of $f$; i.e.  a regular map $0: S \to E$ such that $f \circ 0 = \id_S$,
	\item for all $s \in S(\overline K)$ the fiber $E_{s} := f^{-1}(s)$ above $s$ is a curve over $\overline K$ that is irreducible  and of genus $1$.
\end{defenum}
\end{definition}



Let $L \subseteq \overline K$ be a field extension of $K$ and $s \in S(L)$. Note that since $f$ is smooth and proper the fiber $E_s$ will be smooth and proper over $L$. It is also geometrically reduced and of genus $1$ by definition and $0_s$ will be a point on $E_s$. In particular for every  $s \in S(L)$ the pair $(E_s,0_s)$ is an elliptic curve over $L$ according to \cref{def:ec-over-K}. Also the pair $(E,f)$ is a family of varieties as in \Cref{def:family-of-varieties}.

\begin{definition}[Morphism of families of elliptic curves]
Let $(E_1,f_1,0)$ and $(E_2,f_2,0)$ be elliptic curve curves over $S$ then a \textit{morphism of families of elliptic curves over $S$} is a regular map $h : E_1 \to E_2$ such that $f_1 = f_2\circ h$ and $0 = h \circ 0$.
I.e. $h$ should be such that the following two diagrams commute:
\begin{center}


\begin{tabular}{cc}	
    \begin{tikzcd}
	    E_1 \arrow[rr,"h"] \arrow[dr, "f_1"']  & & E_2 \arrow[dl, "f_2"] \\
	    & S &
    \end{tikzcd}
	&
	\begin{tikzcd}
		E_1 \arrow[rr,"h"]& & E_2 & \\
		& S  \arrow[ul, swap, "0"']  \arrow[ur, "0"'] & .
	\end{tikzcd}
\end{tabular}
\end{center}

The first commutative diagram, i.e. the relation $f_1 = f_2\circ h$, ensures that $h$ is a morphsim of families of varieties (\Cref{def:family-of-varieties-morphism}). While the commutative diagram, ie. $0 = h \circ 0$ ensures that for all $s \in S(\overline K)$ one has $h_s(0_s) = 0_s$.  This means that on fibers $h_s$ is not just a morphisms of varieties, but actually a morphism of elliptic curves as in \Cref{def:ec-over-K}.

\end{definition}

\subsubsection{Weierstrass models}

Note that elliptic families do not always admit a global Weierstrass model. However, they do admit a Weierstrass model locally. As we will explain in this section.

However before doing this we first need to

\begin{definition}[Weierstrass model]\label{def:weierstrass-model-over-var}
Let $S$ be a variety over a field $K$, and let $a := (a_1,a_2,a_3,a_4,a_6 )$ where $a_1,a_2,a_3,a_4,a_6 \in \Gamma(S,\mathcal O_S)$ be regular functions such that for all $s \in S(\overline K)$ one has $\Delta_{a}(s) \neq 0$ (or equivalently $\Delta_{a} \in \Gamma(S,\mathcal O_S)^*$ ) \todo{define $\Delta$}. Then the Weierstrass-Model with invariants $a:={a_1,a_2,a_3,a_4,a_6}$ is defined to be the triple $(E_{a},f,0)$ over $S$ where, \begin{itemize}[label=-]
	\item $E_{a} \subset \P^2_K \times S$ is the curve given by
	$$y^2z+ a_1(s)xyz+a_3(s)yz^2=x^3+a_2(s)x^2z+a_4(s)xz^2+a_6(s)z^3.$$
	\item The morphism $f:  E_{a} \to S$ is projection onto the second coordinate.
	\item  $0 : S \to E_{a} $  is the morphism $s \mapsto ((x:y:z),s)$.
\end{itemize}
\end{definition}

\begin{proposition}[A Weierstrass model over $S$ defines family of elliptic curves]\label{stmt:smooth-weierstrass-over-var-is-ec}
The triple $(E_{a_1,a_2,a_3,a_4,a_6},f,0)$ of \cref{def:weierstrass-model-over-var} is a family of elliptic curves as in \cref{def:ec-over-var}.
\end{proposition}
\begin{proof}
	\todo[inline]{add reference to Katz-Mazur?}
\end{proof}

\begin{proposition}[Existence of local Weierstrass model]\label{stmt:ec-over-var-has-local-weierstrass-model}
	Let $(E,f,0)$ be a family of elliptic curve over a variety $S$ and $s\in S$. Then there exists an affine open $U \subset S$ with $s \in U$ and regular functions $a_1,a_2,a_3,a_4,a_6 \in \Gamma(U,\mathcal O_U)$ such that 
	\begin{align*}
	 \Delta_{a_1,a_2,a_3,a_4,a_6} \in \Gamma(S,\mathcal O_S)^* \text{ and }
	 (E_U,f,0) \cong (E_{a_1,a_2,a_3,a_4,a_6},f,0).
	\end{align*}
\end{proposition}
\begin{proof}
	\todo[inline]{add reference to Katz-Mazur?}
\end{proof}

\todo[inline]{say something about isomorphisms between weierstrass models again?}

\todo[inline]{Give an example of something that doesn't have a global Weierstrass model.}

\subsubsection{Group law}

\subsubsection{Level structure}


\subsection{Elliptic curves over $\C$}
\begin{theorem}\label{stmt:complex-ec-is-C-mod-lattice}
	Let $E$ be an elliptic curve over $\C$ then there is lattice $\Lambda \subseteq \C$ such that $E(\C) \cong \C/\Lambda$ as Riemann-Surfaces.
\end{theorem}
\begin{proof}
	\todo[inline]{add reference to Silverman}
\end{proof}

\begin{proposition}
	Let $\Lambda_1, \Lambda_2 \subset \C$ then the set of morphisms of elliptic curves $\C/\Lambda_1 \to \C/\Lambda_2$ is $$\Hom_{EC}(\C/\Lambda_1,\C/\Lambda_2) =\set{z \in \C \mid z\Lambda_1 \subseteq \Lambda_2}.$$ 
	An element $z \in \C$ defines an isogeny if and only if $z \neq 0$ and an isomorphism if and only if $z\Lambda_1 = \Lambda_2$.
\end{proposition}
\begin{proof}
	\todo[inline]{add reference Silverman}
\end{proof}

\section{Modular curves $\C\setminus \R$ and the upper half plane}



\subsection{M\"obius transformations}


\begin{definition}[M\"obius transformation]\label{def:mobius-transformation}
Let $a,b,c,d \in \R$ with $ad-bc \neq 0$. A \textit{M\"obius transformation} is a transformation is an automorphism of $\C\setminus \R$ of the form
$$ \tau \mapsto \frac {a\tau+b} {c\tau +d}.$$

The M\"obius transformation induce a left group action of $\GL_2(\R)$ on $\C\setminus \R$ as follows:

\begin{align}
\rho :  \GL_2(\R) \times \C\setminus \R &\to \C\setminus \R \\
\left(\begin{bmatrix}
a & b \\ 
c & d
\end{bmatrix}  ,\tau\right) &\mapsto  \frac {a\tau+b} {c\tau +d}.
\end{align}
\end{definition}


Similar to the M\"obius transformation we can also define  $\GL_2(\R)$ a left action on $\IsoKVec{\R}(\R^2,\C)$, the set of $\R$ vectors space isomorphisms between $\R^2$ and $\C$.
\begin{align}
\rho :  \GL_2(\R) \times \IsoKVec{\R}(\R^2,\C) &\to \IsoKVec{\R}(\R^2,\C) \\
\left( \gamma  , f \right) &\mapsto  f \circ \gamma^\transpose.
\end{align}

The transpose is there to make it a left action.  Indeed, if $\gamma_1,\gamma_2 \in \GL_2(\R)$ and $f \in  \IsoKVec{\R}(\R^2,\C)$ then $$\rho(\gamma_1,\rho(\gamma_2,f))=f \circ \gamma_2^\transpose \circ \gamma_1^\transpose = f \circ (\gamma_1 \gamma_2)^\transpose = \rho(\gamma_1\gamma_2,f).$$ Without the transpose this would have been a right action. 

\begin{lemma}
The map 
\begin{align}T  :\IsoKVec{\R}(\R^2,\C) &\to \C \setminus \R\\
                             f &\mapsto \frac {f(1,0)}{f(0,1)}
\end{align}
if compatible with the $\GL_2(\R)$ left action and induces a bijection $\IsoKVec{\R}(\R^2,\C)/\C^* \to \C \setminus \R$.
\end{lemma}

\begin{proof}
First for the compatibility of the $\GL_2(\R)$ action. Let $\gamma := \left [\begin{smallmatrix}
a & b \\ 
c & d
\end{smallmatrix}\right] \in \GL_2(\R)$ and write $\tau_1$ for $f(1,0)$ and $\tau_2$ for $f(0,1)$. Then
\begin{align*}
\frac {(f \circ \gamma^\transpose) (1,0)} {(f \circ \gamma^\transpose) (0,1)} &= \frac {(f \circ \gamma^\transpose) (1,0)} {(f \circ \gamma^\transpose) (0,1)}  =\frac {f(a,b)} {f(c,d)}  = \frac{a\tau_1+b\tau_2}{c\tau_1 + d\tau_2} =  \frac{a\tau_1/\tau_2+b}{c\tau_1/\tau_2 + d} = \gamma\left(\frac {f (1,0)} {f (0,1)}\right).
\end{align*}
Now for the bijection $\IsoKVec{\R}(\R^2,\C)/\C^* \to \C \setminus \R$. First note that if $\lambda \in \C*$ then $T(\lambda f) = T(f)$ so that $T$ factors through a map $T' : \IsoKVec{\R}(\R^2,\C)/\C^*  \to \C \setminus \R$. One can show that $T'$ is bijective by proving that 
\begin{align*}\C \setminus \R &\to \IsoKVec{\R}(\R^2,\C) & \\
\tau &\mapsto ((a,b) \mapsto a\tau +b)
\end{align*}
is an inverse of $T'$.
\end{proof}



\section{A hint towards Shimura varieties}

\subsection{The circle group}

\begin{definition}
	The \textit{circle group} is the group variety $\SS \subseteq \A^3_\R$ over $\R$ given by the equation $(a^2+b^2)t-1$. The identity element is given $(a,b,t)=(1,0,1)$ and the multiplication and inverse maps are given by
	\begin{align*}
	 s : \SS \times \SS \to& \SS \\
	   (a,b,t)(a',b',t') \mapsto& (aa'-bb',ab'+ba', tt) \\
	 \iota : \SS \to & \SS\\
	           (a,b,t) \mapsto& (at,-bt,a^2+b^2)
	\end{align*} 
\end{definition}

\begin{exercise}
	Show that the circle group satisfies the axioms of a group variety.
\end{exercise}
\begin{exercise}
Let $\phi$ be defined by 
\begin{align*}
  \phi:\C^* \to& \SS(\R) \\
         (a+bi) \mapsto& (a,b,(a^2+b^2)^{-1}).
\end{align*}
Show that $\phi$ is a group homomorphism.
\end{exercise}




\listoftodos

\bibliographystyle{alpha}
\bibliography{references.bib}{}

\end{document}
